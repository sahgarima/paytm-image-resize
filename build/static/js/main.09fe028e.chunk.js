(this["webpackJsonppaymt-image-app"]=this["webpackJsonppaymt-image-app"]||[]).push([[0],{33:function(e,a,t){e.exports=t(69)},38:function(e,a,t){},39:function(e,a,t){e.exports=t.p+"static/media/logo.5d5d9eef.svg"},40:function(e,a,t){},69:function(e,a,t){"use strict";t.r(a);var n=t(0),c=t.n(n),l=t(29),i=t.n(l),s=(t(38),t(39),t(40),t(12)),r=t(2),o=t(22),m=t.n(o),h=t(30),d=t(13),u=t(14),g=t(8),p=t(17),f=t(16),v=t(18),b=(t(42),t(31)),E=t.n(b);function N(e){var a=Object(n.useState)({}),t=Object(v.a)(a,2),l=t[0],i=t[1],s=Object(n.useState)({x:e.sizes.width,y:e.sizes.height,aspect:1.5}),r=Object(v.a)(s,2),o=r[0],m=r[1],h=Object(n.useState)(""),d=Object(v.a)(h,2),u=d[0],g=d[1];return c.a.createElement("div",{className:"tab-pane fade show ".concat(e.active),id:"nav-".concat(e.name),role:"tabpanel","aria-labelledby":"nav-".concat(e.name,"-tab")},c.a.createElement("div",{className:"row"},l&&c.a.createElement("div",{className:"col pt-5 pb-3"},c.a.createElement("div",{className:"text-center"},c.a.createElement("img",{src:l.name})))),c.a.createElement("div",{className:"row "},c.a.createElement("div",{className:"col"},c.a.createElement("div",{style:{overflow:"scroll",maxHeight:"1024px",maxWidth:"1024px"}},c.a.createElement(E.a,{src:e.src,crop:o,ruleOfThirds:!0,onImageLoaded:function(a){return g(a),m({unit:"px",maxWidth:e.sizes.width,maxHeight:e.sizes.height}),!1},onComplete:function(a,t){!function(a){u&&a.width&&a.height&&function(e,a,t){var n=document.createElement("canvas"),c=e.naturalWidth/e.width,l=e.naturalHeight/e.height;return n.width=a.width,n.height=a.height,n.getContext("2d").drawImage(e,a.x*c,a.y*l,a.width*c,a.height*l,0,0,a.width,a.height),new Promise((function(e){n.toBlob((function(a){var n="";a.fileName=t,window.URL.revokeObjectURL(n),n=window.URL.createObjectURL(a),a.name=n,e(a)}),"image/jpeg")}))}(u,a,"".concat(e.name,".jpeg")).then((function(a){i(a),e.updateCropedImages(e.name,a)}))}(a)},onChange:function(e,a){m(a)},onDragStart:function(){},onDragEnd:function(){},maxWidth:e.sizes.width,maxHeight:e.sizes.height,minWidth:e.sizes.width,minHeight:e.sizes.height})))))}var w=t(9),k=t.n(w);t(28);k.a.initializeApp({apiKey:"AIzaSyC_VfFZpPxaMpIdPCsWxr4VOem62MW9Aig",authDomain:"spaceproject-93b70.firebaseapp.com",databaseURL:"https://spaceproject-93b70.firebaseio.com",projectId:"spaceproject-93b70",storageBucket:"spaceproject-93b70.appspot.com",messagingSenderId:"869801616027",appId:"1:869801616027:web:cac4c3c20c521b2d81dc3e",measurementId:"G-3JXM9D71D1"});var y=k.a.storage(),j=t(15),z=t.n(j),I=t(65),O=Object(r.f)(function(e){Object(p.a)(t,e);var a=Object(f.a)(t);function t(e){var n;return Object(d.a)(this,t),(n=a.call(this,e)).state={src:null,previews:[{name:"horizontal",sizes:{width:"755",height:"450"}},{name:"vertical",sizes:{width:"365",height:"450"}},{name:"horizontal-small",sizes:{width:"365",height:"212"}},{name:"gallery",sizes:{width:"380",height:"380"}}],files:[],isReady:!1,msg:"",count:0,loading:!1},n.updateCropedImages=function(e,a){var t=n.state.files,c=n.checkFilled(e);-1!=c?t[c]=a:t.push(a),n.setState({files:t,count:n.state.count++},(function(){4==this.state.files.length&&this.setState({isReady:!0,msg:""})}))},n.onSelectFile=function(e){if(e.target.files&&e.target.files.length>0){localStorage.setItem("imageName",e.target.files[0].name);var a=new FileReader,t=Object(g.a)(n);a.onload=function(e){var n=new Image;n.onload=function(){1024==n.width&&1024==n.height?t.setState({src:a.result,msg:"Lets start and crop the images to the smaller size "}):alert("Error:Image should be 1024*1024")},n.src=a.result},a.readAsDataURL(e.target.files[0])}},n.checkFilled=n.checkFilled.bind(Object(g.a)(n)),n}return Object(u.a)(t,[{key:"onUploadSubmission",value:function(e){var a=this;this.setState({loading:!0}),e.preventDefault();var t=[];this.state.files.forEach((function(e){var a=localStorage.getItem("imageName"),n=k.a.storage().ref().child("Cropped/".concat(a,"/").concat(e.fileName)).put(e);t.push(n),n.on(k.a.storage.TaskEvent.STATE_CHANGED,(function(e){var a=e.bytesTransferred/e.totalBytes*100;e.state===k.a.storage.TaskState.RUNNING&&console.log("Progress: ".concat(a,"%"))}),(function(e){return console.log(e.code)}),Object(h.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.snapshot.ref.getDownloadURL();case 2:e.sent;case 3:case"end":return e.stop()}}),e)}))))})),Promise.all(t).then((function(){alert("All files uploaded"),a.props.history.push("/page")})).catch((function(e){return console.log(e.code)}))}},{key:"onFileChange",value:function(e){for(var a=[],t=0;t<e.target.files.length;t++){var n=e.target.files[t];n.id=Math.random(),a.push(n)}this.setState({files:a},(function(){}))}},{key:"checkFilled",value:function(e){return I.findIndex(this.state.files,(function(a){return a.fileName=="".concat(e,".jpeg")}))}},{key:"render",value:function(){var e=this;return c.a.createElement(c.a.Fragment,null,this.state.loading&&c.a.createElement("div",{className:"popup"},c.a.createElement(z.a,{type:"Circles",color:"#00BFFF",height:80,width:80})),c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col"},c.a.createElement("div",{className:"form-group row pt-5"},c.a.createElement("div",{className:"col-sm-6"},c.a.createElement("div",{className:"custom-file"},c.a.createElement("input",{type:"file",className:"custom-file-input",onChange:this.onSelectFile,id:"customFileLang",lang:"es",accept:"image/png,image/gif,image/jpeg"}),c.a.createElement("label",{className:"custom-file-label"},"Select Image"))),this.state.isReady&&c.a.createElement("div",{className:"col-sm-6 text-right"},c.a.createElement("button",{className:"btn btn-success",onClick:this.onUploadSubmission.bind(this)},"Create WebPage"))))),this.state.msg&&c.a.createElement("div",{className:"row pt-3 pb-4"},c.a.createElement("div",{className:"col"},c.a.createElement("h6",{className:"text-danger"},this.state.msg))),this.state.src&&c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col"},c.a.createElement("nav",null,c.a.createElement("ul",{className:"nav nav-tabs nav-justified"},c.a.createElement("li",{className:"nav-item"},c.a.createElement("a",{className:"nav-link active ".concat(-1!=this.checkFilled("horizontal")?"complete":""),"data-toggle":"tab",href:"#nav-horizontal",role:"tab","aria-controls":"nav-horizontal","aria-selected":"true"},"Horizontal")),c.a.createElement("li",{className:"nav-item"},c.a.createElement("a",{className:"nav-link ".concat(-1!=this.checkFilled("vertical")?"complete":""),"data-toggle":"tab",href:"#nav-vertical",role:"tab","aria-controls":"nav-vertical","aria-selected":"false"}," Vertical")),c.a.createElement("li",{className:"nav-item"},c.a.createElement("a",{className:"nav-link ".concat(-1!=this.checkFilled("horizontal-small")?"complete":""),"data-toggle":"tab",href:"#nav-horizontal-small",role:"tab","aria-controls":"nav-horizontal-small","aria-selected":"false"},"Horizontal small")),c.a.createElement("li",{className:"nav-item"},c.a.createElement("a",{className:"nav-link ".concat(-1!=this.checkFilled("gallery")?"complete":""),"data-toggle":"tab",href:"#nav-gallery",role:"tab","aria-controls":"nav-gallery","aria-selected":"false"},"Gallery")))),c.a.createElement("div",{className:"tab-content",id:"nav-tabContent"},this.state.previews.map((function(a,t){return c.a.createElement(N,{updateCropedImages:e.updateCropedImages.bind(e),key:t,name:a.name,sizes:a.sizes,active:"horizontal"===a.name?"active":"",src:e.state.src})})))))))}}]),t}(n.PureComponent)),x=Object(r.f)(function(e){Object(p.a)(t,e);var a=Object(f.a)(t);function t(e){var n;return Object(d.a)(this,t),(n=a.call(this,e)).state={images:[],downloadURLs:{},loading:!0},n.getImage=n.getImage.bind(Object(g.a)(n)),n.handleBack=n.handleBack.bind(Object(g.a)(n)),n}return Object(u.a)(t,[{key:"componentDidMount",value:function(){this.getImage()}},{key:"getImage",value:function(){var e=this,a=(this.state,localStorage.getItem("imageName"));y.ref().child("Cropped/".concat(a)).listAll().then((function(a){var t=[];a.items.forEach((function(a){a.getDownloadURL().then((function(n){var c={};c.url=n,c.name=a.name.replace(".jpeg",""),t.push(c),e.setState({images:t,loading:!1})})).catch((function(e){}))}))})).catch((function(e){}))}},{key:"handleBack",value:function(){this.props.history.push("/")}},{key:"render",value:function(){return c.a.createElement(c.a.Fragment,null,this.state.loading&&c.a.createElement("div",{className:"popup"},c.a.createElement(z.a,{type:"Circles",color:"#00BFFF",height:80,width:80})),c.a.createElement("div",{className:"container border mt-5"},c.a.createElement("div",{className:"row m-3"},c.a.createElement("div",{className:"col text-left"},c.a.createElement("button",{className:"btn btn-success",onClick:this.handleBack},"Go To Home"))),this.state.images.map((function(e,a){return c.a.createElement("div",{key:a,className:"row pb-5"},c.a.createElement("div",{className:"col"},c.a.createElement("h2",null,e.name.toUpperCase()),c.a.createElement("p",null,"This is ",e.name," Image:"),c.a.createElement("img",{src:e.url,alt:e.name,className:"img-responsive rounded"})))}))))}}]),t}(c.a.Component));var S=function(){return c.a.createElement("div",{className:"App"},c.a.createElement(s.a,null,c.a.createElement(r.c,null,c.a.createElement(r.a,{exact:!0,path:"/"},c.a.createElement(O,null)),c.a.createElement(r.a,{path:"/page"},c.a.createElement(x,null)))),c.a.createElement("footer",{className:"page-footer font-small blue pt-4"},"Developed By:",c.a.createElement("strong",null," Garima Sah")))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(S,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[33,1,2]]]);
//# sourceMappingURL=main.09fe028e.chunk.js.map